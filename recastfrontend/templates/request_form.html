{% extends "base.html" %}

{% block container %}

<div class="container">

<form method="post" class="form-horizontal" enctype="multipart/form-data">
  {{ form.hidden_tag() }}
  {{ parameter_points_form.hidden_tag() }}

  <div class="panel panel-default col-md-offset-2">
    <div class="panel-heading">Request </div>
    <div class="panel-body">
      <div class="form-group">
	<label class="control-label col-md-4" for="Analysis"> Analysis: </label>
	<div class="col-md-6">
	  <textarea class="form-control" id="analysis" type="text" placeholder="{{ analysis.title }}" disabled></textarea>
	</div>
      </div>
      
      <div class="form-group">
	<label class="control-label col-md-4" for="{{ form.model_name.id }}">{{ form.model_name.label }} </label>
	<div class="col-md-6">
	  {{ form.model_name(class='form-control') }}
	</div>
      </div>

      <div class="form-group">
	<label class="control-label col-md-4" for="{{ form.reason_for_request.id }}"><i class="fa fa-pencil"></i>&nbsp;{{ form.reason_for_request.label }} </label>
	<div class="col-md-6">
	  {{ form.reason_for_request(class='form-control') }}
	</div>
      </div>

      <div class="form-group">
	<label class="control-label col-md-4" for="{{ form.additional_information.id }}"><i class="fa fa-pencil"></i>&nbsp;{{ form.additional_information.label }} </label>
	<div class="col-md-6">
	  {{ form.additional_information(class='form-control') }}
	</div>
      </div>
    </div>
  </div>
    
  <div class="panel panel-default col-md-offset-2">
    <div class="panel-heading">  Request Parameter Points </div>
    <div class="panel-content col-md-offset-1">
      <!-- Request Parameter Point form --> 
      
      <div class="panel panel-default">
	<div class="panel-content">
	  <div class="form-group">
	    <label class="control-label col-md-4" for="{{ parameter_points_form.parameter_point.id }}"> {{ parameter_points_form.parameter_point.label }} </label>
	    <div class="col-md-6">
	      {{ parameter_points_form.parameter_point(class='form-control') }}
	    </div>
	  </div>
	  
	  <div class="form-group">
	    <label class="control-label col-md-4" for="{{ parameter_points_form.zip_file.id }} "><i class="fa fa-file-zip-o"></i>&nbsp;{{ parameter_points_form.zip_file.label }} </label>
	    <div class="col-md-6">
	      {{ parameter_points_form.zip_file }}
	  <!--
	      <button type="button" class="btn btn-info">Upload file</button>	      -->
	    </div>
	  </div>
	</div>
      </div>
	
      <!--<div class="form-group">
	<span><button type="text" class="btn btn-success pull-left"><i class="glyphicon glyphicon-plus"></i>&nbsp;Add parameter</button></span> 
      </div> -->
    </div>
  </div>
    
  <div>
    <div class="col-md-offset-2">
      <button type="text" class="btn btn-danger pull-left"><i class="glyphicon glyphicon-trash"></i>&nbsp;Delete</button>
      <button type="submit" class="btn btn-primary pull-right"><i class="glyphicon glyphicon-ok"></i>&nbsp;Submit</button>
    </div>
  </div>

</form>
  

</div>

<script type="text/javascript">
  
  var validFileExtension = "zip";
  var validFileSize = 1000000;
  
  document.getElementById('lhe_file').addEventListener('change', validateFile, false);

  function validateExtension(e){
        file = e.target.files;

        var fileExtension = theFile.split('.')[theFile.split('.').length - 1].toLowerCase();
        fileSize = file.size;

        txt ="";
  
        if (!(fileExtension === validFileExtension)){
            txt += "File type extension not allowed \n";
            txt += "Only zip files are allowed"
        }

        if (fileSize > validFileSize){
            txt += "File size must be less than"
            txt += (validFileSize/1000)
            txt += "MB"
        }
        alert(txt)
  }

</script>
            
  

{% endblock %}

